import networkx as nx
<<<<<<< HEAD
from typing import List

from model.route import Route
from model.station import Station
from model.stop import BusStop

import matplotlib.pyplot as plt


def buildGraph(stations: List[Station], routes: List[Route]) -> nx.Graph:
    graph = nx.Graph()

    for station in stations:
        graph.add_node(station.id)

    for route in routes:
        lastStop = route.stops[0]
        for stop in route.stops[1:]:
            distance = stop.distanceFromOrigin - lastStop.distanceFromOrigin
            time = stop.timeFromOrigin - lastStop.timeFromOrigin
            weight = distance/100 * 2 + time/24 * 5
            graph.add_edge(lastStop.stationId, stop.stationId, weight=weight)
            lastStop = stop

    return graph


def drawGraph():
    import database_handler
    dbHandler = database_handler.DatabaseHandler()
    stations = dbHandler.getStations()
    graph = buildGraph(stations, dbHandler.getRoutes())

    pos = {station.id: (station.lat, station.lng) for station in stations}
    nx.draw(graph, pos=pos)
    plt.show()


def calcShortestPaths(stations: List[Station], routes: List[Route], sourceStation: Station, destStation: Station):
    graph = buildGraph(stations, routes)
    path = nx.dijkstra_path(graph, sourceStation, destStation)
    return path
=======
from .model.route import Route
from .model.station import Station
from typing import List

def buildGraph(stations:List[Station] , routes: List[Route], source:Station, destination:Station) -> nx.Graph:
    graph = nx.Graph()
    for station in stations:
        graph.add_node(station.id)

    return graph
        
def calcPaths(stations:List[Station], routes:List[Route], source:Station, destination:Station):
    graph = buildGraph(stations, routes, source, destination)
    
>>>>>>> 30fc5cebff4633c5f8793459b644ff250a4c2213
